# Validation A1.3 — iOS Gallery & Local App Path

## Environment
- **Hardware:** iPhone running iOS 17.x or iOS 18.x (18.x verified – no API changes required).
- **Tooling:** Xcode 15.4+ with iOS 17 SDK, Apple Developer provisioning for sideloading the SkyFeeder Field Utility target.
- **Data Sources:**
  - Optional local dataset: directory containing `captures_index.json`, JPEG thumbnails, and MP4 assets generated by the ESP32 uploader harness.
  - Optional presigned manifest endpoint returning the same schema as `captures_index.json` (see README for field descriptions).

## Pre-flight
1. `git pull` the latest `Codex_Vs_Code` mainline and open `mobile/ios-field-utility/SkyFeederFieldUtility.xcodeproj`.
2. Select the **SkyFeederFieldUtility** scheme, set a development team, and confirm signing succeeds.
3. Decide on the provider mode:
   - **Sample Data (default):** No extra steps; used for UI smoke runs.
   - **Filesystem:** Copy the capture bundle to the device via Finder or Files.app and note the on-device path. Update the Settings screen with that root path.
   - **Presigned:** Ensure the manifest URL returns HTTPS `200` with presigned URLs for each asset/thumbnail.
4. Build (`⌘B`) to validate the SwiftUI and provider additions compile cleanly.

## Execution Checklist
1. **Gallery load:** Launch the app. Confirm the adaptive grid renders, sections are grouped by day, and the empty-state banner disappears once captures load.
2. **Offline indicator:** Toggle Airplane Mode (or disable Wi-Fi). The orange offline banner should appear within ~3 seconds and disappear when connectivity returns.
3. **Detail view & sharing:** Tap a capture, verify metadata formatting, and trigger the share button. Confirm Files/Share Sheet shows the cached asset (sample MP4 stub is expected for demo runs).
4. **Settings:** Navigate to Settings → switch between Sample, Filesystem, and Presigned modes. Each save should refresh the gallery without relaunching the app. Validate cache TTL stepper and badge toggle persist across relaunches.
5. **Badge update:** With badge toggle enabled, leave at least one capture unseen and background the app. The home screen badge should reflect the unseen count; re-open detail view to mark items as seen and watch the badge clear.
6. **Cache inspection:** In Xcode, open `Device Logs` → `App Data` for SkyFeeder Field Utility and confirm the `Library/Caches/SkyFeederCache/` directory contains thumbnail/asset blobs.

## Artifacts to Capture
- `REPORTS/A1.3/ios_gallery_run.md` — narrative log with timestamps, provider mode, and observed behavior for each checklist item.
- `REPORTS/A1.3/ios_gallery_screens.mov` — screen recording of gallery navigation, offline banner, and settings adjustments.
- `REPORTS/A1.3/ios_badge_photo.jpg` — photo of the device home screen showing the badge count before and after clearing.
- `REPORTS/A1.3/xcodebuild_M4.log` — archived build log (`xcodebuild -scheme SkyFeederFieldUtility build`) for reproducibility.

## Pass Criteria
- [ ] All checklist steps verified on physical hardware (simulator acceptable for initial smoke, but not sign-off).
- [ ] Artifacts stored under `REPORTS/A1.3/` and linked from the playbook.
- [ ] No unresolved crash logs or runtime warnings in Xcode during the run.
